{
  "swagger": "2.0",
  "info": {
    "title": "app-client.proto",
    "version": "2019-12-19"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/findcloudlet": {
      "post": {
        "operationId": "FindCloudlet",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/distributed_match_engineFindCloudletReply"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/distributed_match_engineFindCloudletRequest"
            }
          }
        ],
        "tags": [
          "MatchEngineApi"
        ]
      }
    },
    "/v1/getappinstlist": {
      "post": {
        "operationId": "GetAppInstList",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/distributed_match_engineAppInstListReply"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/distributed_match_engineAppInstListRequest"
            }
          }
        ],
        "tags": [
          "MatchEngineApi"
        ]
      }
    },
    "/v1/getlocation": {
      "post": {
        "operationId": "GetLocation",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/distributed_match_engineGetLocationReply"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/distributed_match_engineGetLocationRequest"
            }
          }
        ],
        "tags": [
          "MatchEngineApi"
        ]
      }
    },
    "/v1/registerclient": {
      "post": {
        "operationId": "RegisterClient",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/distributed_match_engineRegisterClientReply"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/distributed_match_engineRegisterClientRequest"
            }
          }
        ],
        "tags": [
          "MatchEngineApi"
        ]
      }
    },
    "/v1/verifylocation": {
      "post": {
        "operationId": "VerifyLocation",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/distributed_match_engineVerifyLocationReply"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/distributed_match_engineVerifyLocationRequest"
            }
          }
        ],
        "tags": [
          "MatchEngineApi"
        ]
      }
    }
  },
  "definitions": {
    "AppInstListReplyAIStatus": {
      "type": "string",
      "enum": [
        "AI_UNDEFINED",
        "AI_SUCCESS",
        "AI_FAIL"
      ],
      "default": "AI_UNDEFINED",
      "title": "Status of the reply"
    },
    "DlgMessageDlgAck": {
      "type": "string",
      "enum": [
        "DLG_ACK_EACH_MESSAGE",
        "DLG_ASY_EVERY_N_MESSAGE",
        "DLG_NO_ACK"
      ],
      "default": "DLG_ACK_EACH_MESSAGE",
      "title": "Need acknowledgement"
    },
    "FindCloudletReplyFindStatus": {
      "type": "string",
      "enum": [
        "FIND_UNKNOWN",
        "FIND_FOUND",
        "FIND_NOTFOUND"
      ],
      "default": "FIND_UNKNOWN"
    },
    "GetLocationReplyLocStatus": {
      "type": "string",
      "enum": [
        "LOC_UNKNOWN",
        "LOC_FOUND",
        "LOC_DENIED"
      ],
      "default": "LOC_UNKNOWN",
      "description": "- LOC_DENIED: The user does not allow his location to be tracked",
      "title": "Status of the reply"
    },
    "VerifyLocationReplyGPSLocationStatus": {
      "type": "string",
      "enum": [
        "LOC_UNKNOWN",
        "LOC_VERIFIED",
        "LOC_MISMATCH_SAME_COUNTRY",
        "LOC_MISMATCH_OTHER_COUNTRY",
        "LOC_ROAMING_COUNTRY_MATCH",
        "LOC_ROAMING_COUNTRY_MISMATCH",
        "LOC_ERROR_UNAUTHORIZED",
        "LOC_ERROR_OTHER"
      ],
      "default": "LOC_UNKNOWN"
    },
    "VerifyLocationReplyTowerStatus": {
      "type": "string",
      "enum": [
        "TOWER_UNKNOWN",
        "CONNECTED_TO_SPECIFIED_TOWER",
        "NOT_CONNECTED_TO_SPECIFIED_TOWER"
      ],
      "default": "TOWER_UNKNOWN",
      "title": "Status of the reply"
    },
    "distributed_match_engineAppInstListReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "status": {
          "$ref": "#/definitions/AppInstListReplyAIStatus"
        },
        "cloudlets": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineCloudletLocation"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineAppInstListRequest": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "session_cookie": {
          "type": "string",
          "title": "Session Cookie from RegisterClientRequest"
        },
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "gps_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "The GPS location of the user"
        },
        "cell_id": {
          "type": "integer",
          "format": "int64",
          "title": "Cell id where the client is"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineAppPort": {
      "type": "object",
      "properties": {
        "proto": {
          "$ref": "#/definitions/distributed_match_engineLProto",
          "title": "TCP (L4), UDP (L4), or HTTP (L7) protocol"
        },
        "internal_port": {
          "type": "integer",
          "format": "int32",
          "title": "Container port"
        },
        "public_port": {
          "type": "integer",
          "format": "int32",
          "title": "Public facing port for TCP/UDP (may be mapped on shared LB reverse proxy)"
        },
        "path_prefix": {
          "type": "string",
          "description": "Public facing path for HTTP L7 access."
        },
        "fqdn_prefix": {
          "type": "string",
          "description": "FQDN prefix to append to base FQDN in FindCloudlet response. May be empty."
        },
        "end_port": {
          "type": "integer",
          "format": "int32",
          "description": "A non-zero end port indicates a port range from internal port to end port, inclusive."
        }
      },
      "description": "AppPort describes an L4 or L7 public access port/path mapping. This is used to track external to internal mappings for access via a shared load balancer or reverse proxy."
    },
    "distributed_match_engineAppinstance": {
      "type": "object",
      "properties": {
        "app_name": {
          "type": "string",
          "title": "App Instance Name"
        },
        "app_vers": {
          "type": "string",
          "title": "App Instance Version"
        },
        "fqdn": {
          "type": "string",
          "title": "App Instance FQDN"
        },
        "ports": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineAppPort"
          },
          "title": "ports to access app"
        }
      }
    },
    "distributed_match_engineCloudletLocation": {
      "type": "object",
      "properties": {
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "cloudlet_name": {
          "type": "string",
          "title": "Cloudlet Name"
        },
        "gps_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "The GPS Location of the user"
        },
        "distance": {
          "type": "number",
          "format": "double",
          "title": "Distance of cloudlet vs loc in request"
        },
        "appinstances": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineAppinstance"
          },
          "title": "App instances"
        }
      }
    },
    "distributed_match_engineDlgReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64"
        },
        "ack_id": {
          "type": "string",
          "format": "uint64",
          "title": "AckId"
        },
        "group_cookie": {
          "type": "string",
          "title": "Group Cookie for Secure comm"
        }
      }
    },
    "distributed_match_engineFindCloudletReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "status": {
          "$ref": "#/definitions/FindCloudletReplyFindStatus",
          "title": "Status return"
        },
        "fqdn": {
          "type": "string",
          "title": "Fully Qualified Domain Name of the Closest App instance"
        },
        "ports": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineAppPort"
          },
          "title": "List of Service Endpoints for AppInst"
        },
        "cloudlet_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "Location of the cloudlet"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineFindCloudletRequest": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "session_cookie": {
          "type": "string",
          "title": "Session Cookie from RegisterClientRequest"
        },
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "gps_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "The GPS location of the user"
        },
        "dev_name": {
          "type": "string",
          "title": "DevName is applicable to Platform apps only"
        },
        "app_name": {
          "type": "string",
          "title": "App Name is applicable to Platform apps only"
        },
        "app_vers": {
          "type": "string",
          "title": "App Version is applicable to Platform apps only"
        },
        "cell_id": {
          "type": "integer",
          "format": "int64",
          "title": "Cell id where the client is"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineGetLocationReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64"
        },
        "status": {
          "$ref": "#/definitions/GetLocationReplyLocStatus"
        },
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "tower": {
          "type": "string",
          "format": "uint64",
          "title": "The tower that user is currently connected to"
        },
        "network_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "The GPS location of the user"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineGetLocationRequest": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "session_cookie": {
          "type": "string",
          "title": "Session Cookie from RegisterClientRequest"
        },
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "cell_id": {
          "type": "integer",
          "format": "int64",
          "title": "Cell id where the client is"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineLProto": {
      "type": "string",
      "enum": [
        "L_PROTO_UNKNOWN",
        "L_PROTO_TCP",
        "L_PROTO_UDP",
        "L_PROTO_HTTP"
      ],
      "default": "L_PROTO_UNKNOWN",
      "description": "LProto indicates which protocol to use for accessing an application on a particular port. This is required by Kubernetes for port mapping.\n\n - L_PROTO_UNKNOWN: Unknown protocol\n - L_PROTO_TCP: TCP (L4) protocol\n - L_PROTO_UDP: UDP (L4) protocol\n - L_PROTO_HTTP: HTTP (L7 tcp) protocol"
    },
    "distributed_match_engineLoc": {
      "type": "object",
      "properties": {
        "latitude": {
          "type": "number",
          "format": "double",
          "title": "latitude in WGS 84 coordinates"
        },
        "longitude": {
          "type": "number",
          "format": "double",
          "title": "longitude in WGS 84 coordinates"
        },
        "horizontal_accuracy": {
          "type": "number",
          "format": "double",
          "title": "horizontal accuracy (radius in meters)"
        },
        "vertical_accuracy": {
          "type": "number",
          "format": "double",
          "title": "vertical accuracy (meters)"
        },
        "altitude": {
          "type": "number",
          "format": "double",
          "title": "On android only lat and long are guaranteed to be supplied\naltitude in meters"
        },
        "course": {
          "type": "number",
          "format": "double",
          "title": "course (IOS) / bearing (Android) (degrees east relative to true north)"
        },
        "speed": {
          "type": "number",
          "format": "double",
          "title": "speed (IOS) / velocity (Android) (meters/sec)"
        },
        "timestamp": {
          "$ref": "#/definitions/distributed_match_engineTimestamp",
          "title": "timestamp"
        }
      }
    },
    "distributed_match_engineRegisterClientReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "status": {
          "$ref": "#/definitions/distributed_match_engineReplyStatus",
          "title": "Status of the reply"
        },
        "session_cookie": {
          "type": "string",
          "title": "Session Cookie to be used in later API calls"
        },
        "token_server_uri": {
          "type": "string",
          "title": "URI for Token Server"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineRegisterClientRequest": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "dev_name": {
          "type": "string",
          "title": "App Developer Name"
        },
        "app_name": {
          "type": "string",
          "title": "App Name"
        },
        "app_vers": {
          "type": "string",
          "title": "App Version"
        },
        "carrier_name": {
          "type": "string",
          "title": "carrier name, not currently used"
        },
        "auth_token": {
          "type": "string",
          "title": "authentication token"
        },
        "cell_id": {
          "type": "integer",
          "format": "int64",
          "title": "Cell id where the client is"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineReplyStatus": {
      "type": "string",
      "enum": [
        "RS_UNDEFINED",
        "RS_SUCCESS",
        "RS_FAIL"
      ],
      "default": "RS_UNDEFINED"
    },
    "distributed_match_engineTag": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "title": "type of data"
        },
        "data": {
          "type": "string",
          "title": "data value"
        }
      }
    },
    "distributed_match_engineTimestamp": {
      "type": "object",
      "properties": {
        "seconds": {
          "type": "string",
          "format": "int64"
        },
        "nanos": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "This is a simple Timestamp message type\ngrpc-gateway converts google.protobuf.Timestamp into an RFC3339-type string\nwhich is a waste of a conversion, so we define our own"
    },
    "distributed_match_engineVerifyLocationReply": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "tower_status": {
          "$ref": "#/definitions/VerifyLocationReplyTowerStatus"
        },
        "gps_location_status": {
          "$ref": "#/definitions/VerifyLocationReplyGPSLocationStatus"
        },
        "gps_location_accuracy_km": {
          "type": "number",
          "format": "double",
          "title": "location accuracy, the location is verified to\nbe within this number of kilometers.  Negative value\nmeans no verification was performed"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    },
    "distributed_match_engineVerifyLocationRequest": {
      "type": "object",
      "properties": {
        "ver": {
          "type": "integer",
          "format": "int64",
          "title": "API version"
        },
        "session_cookie": {
          "type": "string",
          "title": "Session Cookie from RegisterClientRequest"
        },
        "carrier_name": {
          "type": "string",
          "title": "The carrier name that the user is connected to (\"Cellular Carrier Name\")"
        },
        "gps_location": {
          "$ref": "#/definitions/distributed_match_engineLoc",
          "title": "The GPS location to verify"
        },
        "verify_loc_token": {
          "type": "string",
          "title": "token used for location verification, app must be retrieve from TokenServerURI"
        },
        "cell_id": {
          "type": "integer",
          "format": "int64",
          "title": "Cell id where the client is"
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/distributed_match_engineTag"
          },
          "title": "Vendor specific data"
        }
      }
    }
  }
}
