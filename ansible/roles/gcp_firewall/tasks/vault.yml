---
- name: Set up vault firewall
  gcp_compute_firewall:
    name: vault-ac
    description: Ansible-created firewall rules for vault and consul
    allowed:
      - ip_protocol: tcp
        ports:
          - '8200'        # Vault server
    target_tags:
      - vault-ac
    project: "{{ gcp_project }}"
    auth_kind: "{{ gcp_auth_kind }}"
    service_account_file: "{{ gcp_service_account_file_firewall }}"
  delegate_to: localhost
