---
- hosts: localhost
  connection: local
  gather_facts: no

  tasks:
  - name: Look up influx DB creds and Artifactory token in vault
    set_fact:
      vault_lookup: "{{ lookup('vault', influxdb_path, artifactory_tokens) }}"
    vars:
      influxdb_path: "secret/EU/accounts/influxdb:influx_creds"
      artifactory_tokens: "secret/ansible/{{ deploy_environ }}/artifactory_tokens"

  - debug: var=vault_lookup.influx_creds.data.user
  - debug: var=vault_lookup.artifactory_tokens.data.etcd_reader
