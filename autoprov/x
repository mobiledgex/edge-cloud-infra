2020-03-10T21:27:53.900-0500	INFO	7bdd936a81ef0594	log/spanlog.go:132	start test
no server TLS credentials
2020-03-10T21:27:53.900-0500	INFO	notify/notify_server.go:134	ServerMgr listening	{"addr": "127.0.0.1:9999"}
2020-03-10T21:27:53.901-0500	INFO	62650b61b6504324	autoprov/autoprov.go:64	start main
2020-03-10T21:27:53.901-0500	INFO	62650b61b6504324	autoprov/autoprov.go:73	vault auth	{"type": "none"}
2020-03-10T21:27:53.901-0500	INFO	62650b61b6504324	edgeproto/node.pb.go:894	cache update	{"new": "key:<name:\"JMORRIS-MAC.local\" type:\"autoprov\" cloudlet_key:<> > build_author:\"Jim\" hostname:\"JMORRIS-MAC.local\" "}
2020-03-10T21:27:53.901-0500	INFO	edgeproto/node.pb.go:895	SyncUpdate Node	{"obj": "key:<name:\"JMORRIS-MAC.local\" type:\"autoprov\" cloudlet_key:<> > build_author:\"Jim\" hostname:\"JMORRIS-MAC.local\" ", "rev": 0}
2020-03-10T21:27:53.902-0500	INFO	62650b61b6504324	autoprov/autoprov.go:102	finish main
2020-03-10T21:27:53.902-0500	INFO	c22423d2de5d741	autoprov/autoprov_aggr.go:104	start auto-prov-aggr init
2020-03-10T21:27:53.902-0500	INFO	notify/notify_client.go:139	creating notify client	{"addr": "127.0.0.1:9999", "tlsCert": ""}
2020-03-10T21:27:53.902-0500	INFO	7bdd936a81ef0594	edgeproto/clusterinst.pb.go:1771	cache update	{"new": "key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<name:\"x1.tiny\" > num_masters:1 num_nodes:2 status:<> auto_scale_policy:\"auto-scale-policy\" "}
2020-03-10T21:27:53.902-0500	INFO	edgeproto/clusterinst.pb.go:1772	SyncUpdate ClusterInst	{"obj": "key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<name:\"x1.tiny\" > num_masters:1 num_nodes:2 status:<> auto_scale_policy:\"auto-scale-policy\" ", "rev": 0}
2020-03-10T21:27:53.902-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:693	cache update	{"new": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> "}
2020-03-10T21:27:53.902-0500	INFO	edgeproto/alert.pb.go:694	SyncUpdate Alert	{"obj": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> ", "rev": 0}
2020-03-10T21:27:53.903-0500	INFO	c22423d2de5d741	autoprov/autoprov_aggr.go:108	runIter failed	{"err": "expected json response, got empty body, with status: 200"}
2020-03-10T21:27:53.903-0500	INFO	c22423d2de5d741	autoprov/autoprov_aggr.go:110	finish auto-prov-aggr init
2020-03-10T21:27:53.903-0500	INFO	6916221321e15d37	log/jaeger.go:149	start StreamNotice
2020-03-10T21:27:53.903-0500	INFO	5f6b061a6158eb42	notify/notify_server.go:164	start StreamNotice start
2020-03-10T21:27:53.903-0500	INFO	5f6b061a6158eb42	notify/notify_server.go:291	Notify server connected	{"client": "127.0.0.1:57841", "version": 1, "supported-version": 1, "notifyid": 1, "remoteWanted": {"edgeproto.Alert":{},"edgeproto.App":{},"edgeproto.AutoProvPolicy":{},"edgeproto.ClusterInst":{},"edgeproto.DebugRequest":{},"edgeproto.Settings":{}}, "filterCloudletKey": false}
2020-03-10T21:27:53.903-0500	INFO	5f6b061a6158eb42	notify/notify_server.go:202	finish StreamNotice start	{"peer": "127.0.0.1:57841"}
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	notify/notify_sendrecv.go:184	start notify-send-all
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	notify/notify_sendrecv.go:228	send all
2020-03-10T21:27:53.903-0500	INFO	notify/notify_client.go:208	Notify client connected	{"server": "127.0.0.1:9999", "local": "127.0.0.1:57841", "version": 1, "supported-version": 1, "remoteWanted": {"edgeproto.Alert":{},"edgeproto.AppInstInfo":{},"edgeproto.CloudletInfo":{},"edgeproto.ClusterInstInfo":{},"edgeproto.Node":{}}, "filterCloudletKey": false, "tries": 1, "connects": 1}
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	notify/alert.notify.go:230	server send Alert	{"peer": "127.0.0.1:57841", "action": "UPDATE", "key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	notify/notify_sendrecv.go:254	finish notify-send-all	{"peer": "127.0.0.1:57841", "cliserv": "server"}
2020-03-10T21:27:53.903-0500	INFO	5952d56661aa200d	notify/notify_sendrecv.go:184	start notify-send-all
2020-03-10T21:27:53.903-0500	INFO	5952d56661aa200d	notify/notify_sendrecv.go:228	send all
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	log/jaeger.go:145	start notify-recv edgeproto.Alert
2020-03-10T21:27:53.903-0500	INFO	5952d56661aa200d	notify/node.notify.go:130	client send Node	{"peer": "127.0.0.1:9999", "action": "UPDATE", "key": {"name":"JMORRIS-MAC.local","type":"autoprov","cloudlet_key":{}}}
2020-03-10T21:27:53.903-0500	INFO	5952d56661aa200d	notify/notify_sendrecv.go:254	finish notify-send-all	{"cliserv": "client", "peer": "127.0.0.1:9999"}
2020-03-10T21:27:53.903-0500	INFO	4e488e1b6d903bb7	edgeproto/alert.pb.go:693	cache update	{"new": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> "}
2020-03-10T21:27:53.903-0500	INFO	edgeproto/alert.pb.go:694	SyncUpdate Alert	{"obj": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> ", "rev": 0}
2020-03-10T21:27:53.904-0500	INFO	4e488e1b6d903bb7	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.Alert	{"action": "UPDATE", "cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "Alert", "key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.904-0500	INFO	4e488e1b6d903bb7	autoprov/alerthandler.go:36	start auto scale
2020-03-10T21:27:53.904-0500	INFO	4e488e1b6d903bb7	log/jaeger.go:145	start notify-recv 
2020-03-10T21:27:53.904-0500	INFO	4e488e1b6d903bb7	notify/notify_sendrecv.go:304	finish notify-recv 	{"action": "SENDALL_END", "cliserv": "client", "peer": "127.0.0.1:9999"}
2020-03-10T21:27:53.904-0500	INFO	5952d56661aa200d	log/jaeger.go:145	start notify-recv edgeproto.Node
2020-03-10T21:27:53.904-0500	INFO	5952d56661aa200d	edgeproto/node.pb.go:894	cache update	{"new": "key:<name:\"JMORRIS-MAC.local\" type:\"autoprov\" cloudlet_key:<> > notify_id:1 build_author:\"Jim\" hostname:\"JMORRIS-MAC.local\" "}
2020-03-10T21:27:53.904-0500	INFO	edgeproto/node.pb.go:895	SyncUpdate Node	{"obj": "key:<name:\"JMORRIS-MAC.local\" type:\"autoprov\" cloudlet_key:<> > notify_id:1 build_author:\"Jim\" hostname:\"JMORRIS-MAC.local\" ", "rev": 0}
2020-03-10T21:27:53.904-0500	INFO	5952d56661aa200d	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.Node	{"action": "UPDATE", "cliserv": "server", "peer": "127.0.0.1:57841", "objtype": "Node", "key": "name:\"JMORRIS-MAC.local\" type:\"autoprov\" cloudlet_key:<> "}
2020-03-10T21:27:53.904-0500	INFO	5952d56661aa200d	log/jaeger.go:145	start notify-recv 
2020-03-10T21:27:53.904-0500	INFO	5952d56661aa200d	notify/notify_sendrecv.go:304	finish notify-recv 	{"action": "SENDALL_END", "cliserv": "server", "peer": "127.0.0.1:57841"}
2020-03-10T21:27:53.904-0500	INFO	4e488e1b6d903bb7	autoprov/autoscale.go:58	auto scaling clusterinst	{"alert": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> ", "ClusterInst": {"fields":["14"],"key":{"cluster_key":{"name":"Pokemons"},"cloudlet_key":{"organization":"T-Mobile","name":"San Francisco Site"},"organization":"SierrawareLLC"},"flavor":{},"num_nodes":3,"status":{}}}
2020-03-10T21:27:53.904-0500	INFO	35fb7ca93b72bf27	testutil/dummy_server.go:66	start /edgeproto.ClusterInstApi/UpdateClusterInst
2020-03-10T21:27:53.904-0500	INFO	35fb7ca93b72bf27	edgeproto/clusterinst.pb.go:1771	cache update	{"new": "fields:\"14\" key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<> num_nodes:3 status:<> "}
2020-03-10T21:27:53.904-0500	INFO	edgeproto/clusterinst.pb.go:1772	SyncUpdate ClusterInst	{"obj": "fields:\"14\" key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<> num_nodes:3 status:<> ", "rev": 0}
2020-03-10T21:27:53.904-0500	INFO	35fb7ca93b72bf27	testutil/dummy_server.go:73	finish /edgeproto.ClusterInstApi/UpdateClusterInst
2020-03-10T21:27:53.905-0500	INFO	4e488e1b6d903bb7	autoprov/alerthandler.go:40	handled alert	{"alert": "labels:<key:\"alertname\" value:\"AutoScaleUp\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"nodecount\" value:\"2\" > state:\"firing\" active_at:<> ", "err": null}
2020-03-10T21:27:53.905-0500	INFO	4e488e1b6d903bb7	autoprov/alerthandler.go:41	finish auto scale
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:703	cache delete
2020-03-10T21:27:53.914-0500	INFO	edgeproto/alert.pb.go:704	SyncDelete Alert	{"key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}", "rev": 0}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:203	updateInternal Alert	{"key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:693	cache update	{"new": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> "}
2020-03-10T21:27:53.914-0500	INFO	edgeproto/alert.pb.go:694	SyncUpdate Alert	{"obj": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> ", "rev": 0}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:203	updateInternal Alert	{"key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:230	server send Alert	{"peer": "127.0.0.1:57841", "action": "DELETE", "key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:230	server send Alert	{"peer": "127.0.0.1:57841", "action": "UPDATE", "key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.Alert
2020-03-10T21:27:53.914-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:703	cache delete
2020-03-10T21:27:53.914-0500	INFO	edgeproto/alert.pb.go:704	SyncDelete Alert	{"key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}", "rev": 0}
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.Alert	{"action": "DELETE", "cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "Alert", "key": "{\"alertname\":\"AutoScaleUp\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.Alert
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:693	cache update	{"new": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> "}
2020-03-10T21:27:53.915-0500	INFO	edgeproto/alert.pb.go:694	SyncUpdate Alert	{"obj": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> ", "rev": 0}
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.Alert	{"action": "UPDATE", "cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "Alert", "key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	autoprov/alerthandler.go:36	start auto scale
2020-03-10T21:27:53.915-0500	INFO	7bdd936a81ef0594	autoprov/autoscale.go:58	auto scaling clusterinst	{"alert": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> ", "ClusterInst": {"fields":["14"],"key":{"cluster_key":{"name":"Pokemons"},"cloudlet_key":{"organization":"T-Mobile","name":"San Francisco Site"},"organization":"SierrawareLLC"},"flavor":{},"num_nodes":1,"status":{}}}
2020-03-10T21:27:53.916-0500	INFO	4b383dd4daff0bb4	testutil/dummy_server.go:66	start /edgeproto.ClusterInstApi/UpdateClusterInst
2020-03-10T21:27:53.916-0500	INFO	4b383dd4daff0bb4	edgeproto/clusterinst.pb.go:1771	cache update	{"new": "fields:\"14\" key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<> num_nodes:1 status:<> "}
2020-03-10T21:27:53.916-0500	INFO	edgeproto/clusterinst.pb.go:1772	SyncUpdate ClusterInst	{"obj": "fields:\"14\" key:<cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" > flavor:<> num_nodes:1 status:<> ", "rev": 0}
2020-03-10T21:27:53.916-0500	INFO	4b383dd4daff0bb4	testutil/dummy_server.go:73	finish /edgeproto.ClusterInstApi/UpdateClusterInst
2020-03-10T21:27:53.916-0500	INFO	7bdd936a81ef0594	autoprov/alerthandler.go:40	handled alert	{"alert": "labels:<key:\"alertname\" value:\"AutoScaleDown\" > labels:<key:\"cloudlet\" value:\"San Francisco Site\" > labels:<key:\"cluster\" value:\"Pokemons\" > labels:<key:\"dev\" value:\"SierrawareLLC\" > labels:<key:\"operator\" value:\"T-Mobile\" > annotations:<key:\"lowcpunodecount\" value:\"2\" > annotations:<key:\"minnodes\" value:\"1\" > annotations:<key:\"nodecount\" value:\"3\" > state:\"firing\" active_at:<> ", "err": null}
2020-03-10T21:27:53.916-0500	INFO	7bdd936a81ef0594	autoprov/alerthandler.go:41	finish auto scale
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:703	cache delete
2020-03-10T21:27:53.925-0500	INFO	edgeproto/alert.pb.go:704	SyncDelete Alert	{"key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}", "rev": 0}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:203	updateInternal Alert	{"key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	edgeproto/clusterinst.pb.go:1781	cache delete
2020-03-10T21:27:53.925-0500	INFO	edgeproto/clusterinst.pb.go:1782	SyncDelete ClusterInst	{"key": "cluster_key:<name:\"Pokemons\" > cloudlet_key:<organization:\"T-Mobile\" name:\"San Francisco Site\" > organization:\"SierrawareLLC\" ", "rev": 0}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/alert.notify.go:230	server send Alert	{"peer": "127.0.0.1:57841", "action": "DELETE", "key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	autoprov/autoprov_aggr.go:95	restarting autoProvAggr thread
2020-03-10T21:27:53.925-0500	INFO	5f00ef7b8778544d	autoprov/autoprov_aggr.go:104	start auto-prov-aggr init
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	edgeproto/clusterinst.pb.go:1771	cache update	{"new": "key:<cluster_key:<name:\"Reservable\" > cloudlet_key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > organization:\"MobiledgeX\" > flavor:<name:\"x1.tiny\" > ip_access:IP_ACCESS_SHARED num_masters:1 num_nodes:2 status:<> reservable:true "}
2020-03-10T21:27:53.925-0500	INFO	edgeproto/clusterinst.pb.go:1772	SyncUpdate ClusterInst	{"obj": "key:<cluster_key:<name:\"Reservable\" > cloudlet_key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > organization:\"MobiledgeX\" > flavor:<name:\"x1.tiny\" > ip_access:IP_ACCESS_SHARED num_masters:1 num_nodes:2 status:<> reservable:true ", "rev": 0}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.Alert
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/clusterinst.notify.go:110	updateInternal ClusterInst	{"key": "cluster_key:<name:\"Reservable\" > cloudlet_key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > organization:\"MobiledgeX\" "}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	edgeproto/alert.pb.go:703	cache delete
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/clusterinst.notify.go:137	server send ClusterInst	{"peer": "127.0.0.1:57841", "action": "UPDATE", "key": {"cluster_key":{"name":"Reservable"},"cloudlet_key":{"organization":"AT&T Inc.","name":"San Jose Site"},"organization":"MobiledgeX"}}
2020-03-10T21:27:53.925-0500	INFO	edgeproto/alert.pb.go:704	SyncDelete Alert	{"key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}", "rev": 0}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.Alert	{"action": "DELETE", "cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "Alert", "key": "{\"alertname\":\"AutoScaleDown\",\"cloudlet\":\"San Francisco Site\",\"cluster\":\"Pokemons\",\"dev\":\"SierrawareLLC\",\"operator\":\"T-Mobile\"}"}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	edgeproto/autoprovpolicy.pb.go:1196	cache update	{"new": "key:<organization:\"NianticInc\" name:\"auto-prov-policy\" > deploy_client_count:2 deploy_interval_count:2 cloudlets:<key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > loc:<> > "}
2020-03-10T21:27:53.925-0500	INFO	edgeproto/autoprovpolicy.pb.go:1197	SyncUpdate AutoProvPolicy	{"obj": "key:<organization:\"NianticInc\" name:\"auto-prov-policy\" > deploy_client_count:2 deploy_interval_count:2 cloudlets:<key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > loc:<> > ", "rev": 0}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.ClusterInst
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/autoprovpolicy.notify.go:105	updateInternal AutoProvPolicy	{"key": "organization:\"NianticInc\" name:\"auto-prov-policy\" "}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	notify/autoprovpolicy.notify.go:132	server send AutoProvPolicy	{"peer": "127.0.0.1:57841", "action": "UPDATE", "key": {"organization":"NianticInc","name":"auto-prov-policy"}}
2020-03-10T21:27:53.925-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.ClusterInst	{"action": "UPDATE", "cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "ClusterInst", "key": "cluster_key:<name:\"Reservable\" > cloudlet_key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > organization:\"MobiledgeX\" "}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	edgeproto/app.pb.go:1598	cache update	{"new": "key:<organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" > image_type:IMAGE_TYPE_DOCKER access_ports:\"tcp:10003\" default_flavor:<name:\"x1.tiny\" > auto_prov_policy:\"auto-prov-policy\" access_type:ACCESS_TYPE_LOAD_BALANCER "}
2020-03-10T21:27:53.926-0500	INFO	5f00ef7b8778544d	autoprov/autoprov_aggr.go:108	runIter failed	{"err": "expected json response, got empty body, with status: 200"}
2020-03-10T21:27:53.926-0500	INFO	5f00ef7b8778544d	autoprov/autoprov_aggr.go:110	finish auto-prov-aggr init
2020-03-10T21:27:53.926-0500	INFO	edgeproto/app.pb.go:1599	SyncUpdate App	{"obj": "key:<organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" > image_type:IMAGE_TYPE_DOCKER access_ports:\"tcp:10003\" default_flavor:<name:\"x1.tiny\" > auto_prov_policy:\"auto-prov-policy\" access_type:ACCESS_TYPE_LOAD_BALANCER ", "rev": 0}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.AutoProvPolicy
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	notify/app.notify.go:109	updateInternal App	{"key": "organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" "}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	notify/app.notify.go:136	server send App	{"peer": "127.0.0.1:57841", "action": "UPDATE", "key": {"organization":"NianticInc","name":"Pokemon Go!","version":"1.0.2"}}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	edgeproto/autoprovpolicy.pb.go:1196	cache update	{"new": "key:<organization:\"NianticInc\" name:\"auto-prov-policy\" > deploy_client_count:2 deploy_interval_count:2 cloudlets:<key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > loc:<> > "}
2020-03-10T21:27:53.926-0500	INFO	edgeproto/autoprovpolicy.pb.go:1197	SyncUpdate AutoProvPolicy	{"obj": "key:<organization:\"NianticInc\" name:\"auto-prov-policy\" > deploy_client_count:2 deploy_interval_count:2 cloudlets:<key:<organization:\"AT&T Inc.\" name:\"San Jose Site\" > loc:<> > ", "rev": 0}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.AutoProvPolicy	{"cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "AutoProvPolicy", "key": "organization:\"NianticInc\" name:\"auto-prov-policy\" ", "action": "UPDATE"}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	log/jaeger.go:145	start notify-recv edgeproto.App
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	edgeproto/app.pb.go:1598	cache update	{"new": "key:<organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" > image_type:IMAGE_TYPE_DOCKER access_ports:\"tcp:10003\" default_flavor:<name:\"x1.tiny\" > auto_prov_policy:\"auto-prov-policy\" access_type:ACCESS_TYPE_LOAD_BALANCER "}
2020-03-10T21:27:53.926-0500	INFO	edgeproto/app.pb.go:1599	SyncUpdate App	{"obj": "key:<organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" > image_type:IMAGE_TYPE_DOCKER access_ports:\"tcp:10003\" default_flavor:<name:\"x1.tiny\" > auto_prov_policy:\"auto-prov-policy\" access_type:ACCESS_TYPE_LOAD_BALANCER ", "rev": 0}
2020-03-10T21:27:53.926-0500	INFO	7bdd936a81ef0594	notify/notify_sendrecv.go:316	finish notify-recv edgeproto.App	{"cliserv": "client", "peer": "127.0.0.1:9999", "objtype": "App", "key": "organization:\"NianticInc\" name:\"Pokemon Go!\" version:\"1.0.2\" ", "action": "UPDATE"}
2020-03-10T21:27:53.951-0500	INFO	autoprov/autoprov_aggr.go:180	stats	{"app": {"name":"Pokemon Go!","version":"1.0.2"}, "cloudlet": {"name":"San Jose Site"}, "count": 0}
2020-03-10T21:27:53.952-0500	INFO	7bdd936a81ef0594	autoprov/autoprov_aggr.go:252	runIter	{"numstats": 1, "numDeploy": 0, "numUndeploy": 0}
2020-03-10T21:27:53.952-0500	INFO	autoprov/autoprov_aggr.go:180	stats	{"app": {"name":"Pokemon Go!","version":"1.0.2"}, "cloudlet": {"name":"San Jose Site"}, "count": 1}
2020-03-10T21:27:53.952-0500	INFO	7bdd936a81ef0594	autoprov/autoprov_aggr.go:252	runIter	{"numstats": 1, "numDeploy": 0, "numUndeploy": 0}
XXXX CKEY {AT&T Inc. San Jose Site}
XXXX appp {Organization:NianticInc Name:Pokemon Go! Version:1.0.2} appstats &{deployClientCount:2 deployIntervalCount:2 cloudlets:map[]}
2020-03-10T21:27:53.952-0500	INFO	notify/notify_client.go:221	Notify client connection closed	{"server": "127.0.0.1:9999", "local": "127.0.0.1:57841", "err": "context canceled"}
2020-03-10T21:27:53.952-0500	INFO	notify/notify_client.go:109	Notify client stopped	{"server": "127.0.0.1:9999", "local": ""}
2020-03-10T21:27:53.952-0500	INFO	notify/notify_sendrecv.go:278	server receive	{"err": "rpc error: code = Canceled desc = context canceled"}
2020-03-10T21:27:53.952-0500	INFO	f217a36309f8b91	notify/notify_server.go:215	start StreamNotice done
2020-03-10T21:27:53.952-0500	INFO	f217a36309f8b91	notify/notify_server.go:311	Notify server connection closed	{"client": "127.0.0.1:57841", "err": "context canceled"}
2020-03-10T21:27:53.952-0500	INFO	notify/notify_server.go:235	Flush	{"notifyId": 1}
2020-03-10T21:27:53.952-0500	INFO	f217a36309f8b91	edgeproto/appinst.pb.go:3539	CacheFlush AppInstInfo	{"notifyId": 1}
2020-03-10T21:27:53.952-0500	INFO	f217a36309f8b91	edgeproto/clusterinst.pb.go:2616	CacheFlush ClusterInstInfo	{"notifyId": 1}
2020-03-10T21:27:53.953-0500	INFO	f217a36309f8b91	edgeproto/cloudlet.pb.go:5197	CacheFlush CloudletInfo	{"notifyId": 1}
2020-03-10T21:27:53.953-0500	INFO	f217a36309f8b91	edgeproto/alert.pb.go:739	CacheFlush Alert	{"notifyId": 1}
2020-03-10T21:27:53.953-0500	INFO	f217a36309f8b91	edgeproto/node.pb.go:940	CacheFlush Node	{"notifyId": 1}
2020-03-10T21:27:53.953-0500	INFO	f217a36309f8b91	edgeproto/node.pb.go:948	CacheFlush Node delete	{"key": {"name":"JMORRIS-MAC.local","type":"autoprov","cloudlet_key":{}}}
2020-03-10T21:27:53.953-0500	INFO	f217a36309f8b91	notify/notify_server.go:241	finish StreamNotice done
2020-03-10T21:27:53.953-0500	INFO	6916221321e15d37	cloudcommon/audit.go:55	finished	{"err": null}
2020-03-10T21:27:53.953-0500	INFO	6916221321e15d37	cloudcommon/audit.go:57	finish StreamNotice	{"client": "127.0.0.1:57841"}
--- FAIL: TestAutoProv (0.05s)
    require.go:1159: 
        	Error Trace:	autoprov_test.go:226
        	            				autoprov_test.go:65
        	Error:      	Should be true
        	Test:       	TestAutoProv
FAIL
exit status 1
FAIL	github.com/mobiledgex/edge-cloud-infra/autoprov	0.080s
