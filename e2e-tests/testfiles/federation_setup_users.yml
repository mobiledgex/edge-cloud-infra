description: set up users

tests:
# OP1 Users
- name: admin setup config so users can be created
  actions: [mcapi-configupdate=mc1op1,mcapi-configshow=mc1op1]
  apifile: '{{datadir2}}/mcconfig.yml'
  curuserfile: '{{datadir2}}/mc_admin.yml'
  compareyaml:
    yaml1: '{{outputdir}}/show-commands.yml'
    yaml2: '{{datadir2}}/mcconfig.yml'
    filetype: mcconfig

- name: create users
  actions: [mcapi-createusers=mc1op1]
  apifile: '{{datadir2}}/federation_user1.yml,{{datadir2}}/federation_user2.yml,{{datadir2}}/federation_user3.yml'
  apifilevars:
    suffix: op1

- name: setup user tokens to avoid extra login audit logs
  actions: [mcapi-auditsetup=mc1op1]
  apifile: '{{datadir2}}/mc_admin.yml,{{datadir2}}/federation_user2.yml,{{datadir2}}/federation_user1.yml'
  apifilevars:
    suffix: op1

# OP2 Users
- name: admin setup config so users can be created
  actions: [mcapi-configupdate=mc1op2,mcapi-configshow=mc1op2]
  apifile: '{{datadir2}}/mcconfig.yml'
  curuserfile: '{{datadir2}}/mc_admin.yml'
  compareyaml:
    yaml1: '{{outputdir}}/show-commands.yml'
    yaml2: '{{datadir2}}/mcconfig.yml'
    filetype: mcconfig

- name: create users
  actions: [mcapi-createusers=mc1op2]
  apifile: '{{datadir2}}/federation_user1.yml,{{datadir2}}/federation_user2.yml,{{datadir2}}/federation_user3.yml'
  apifilevars:
    suffix: op2

- name: setup user tokens to avoid extra login audit logs
  actions: [mcapi-auditsetup=mc1op2]
  apifile: '{{datadir2}}/mc_admin.yml,{{datadir2}}/federation_user2.yml,{{datadir2}}/federation_user1.yml'
  apifilevars:
    suffix: op2
